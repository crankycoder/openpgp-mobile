Command: valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes --error-exitcode=1 --suppressions=/home/vng/dev/openpgp-mobile/c/test/valgrind.supp /home/vng/dev/openpgp-mobile/c/build/test_memory_large_data
Timestamp: Fri Jun 20 08:08:19 AM EDT 2025
========================
==1541465== Memcheck, a memory error detector
==1541465== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==1541465== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
==1541465== Command: /home/vng/dev/openpgp-mobile/c/build/test_memory_large_data
==1541465== 

=== Memory Regression Test Suite - Large Data Testing ===
Testing size limit boundary conditions for memory safety

Running Message Size Boundaries in isolation... Testing message size boundaries...
[31mFAIL[0m test/test_memory_large_data.c:34: Assertion failed: result.error == OPENPGP_ERROR_SERIALIZATION
FAIL
Running Signature Data Boundaries in isolation... Testing signature data size boundaries...
[31mFAIL[0m test/test_memory_large_data.c:65: Assertion failed: (result).error == (OPENPGP_ERROR_SERIALIZATION)
FAIL
Running Key Parameter Boundaries in isolation... Testing key parameter size boundaries...
[31mFAIL[0m test/test_memory_large_data.c:102: Assertion failed: (result).error == (OPENPGP_ERROR_SERIALIZATION)
FAIL
Running FlatBuffer Size Boundaries in isolation... Testing FlatBuffer size boundaries (4KB limit)...
FlatBuffer size boundary tests passed
PASS
Running Memory Allocation Patterns in isolation... Testing memory allocation patterns under size limits...
[31mFAIL[0m test/test_memory_large_data.c:164: Assertion failed: (result).error == (OPENPGP_ERROR_SERIALIZATION)
FAIL
Running Concurrent Size Validation in isolation... Testing concurrent size validation scenarios...
[31mFAIL[0m test/test_memory_large_data.c:217: Assertion failed: result1.error == OPENPGP_ERROR_SERIALIZATION
FAIL

=== Large Data Testing Summary ===
Tests run: 0, Tests failed: 0
[31mFAILED: 5 test(s) failed
[0m==1541465== 
==1541465== HEAP SUMMARY:
==1541465==     in use at exit: 4,698 bytes in 5 blocks
==1541465==   total heap usage: 25 allocs, 20 frees, 22,912 bytes allocated
==1541465== 
==1541465== 46 bytes in 1 blocks are definitely lost in loss record 1 of 5
==1541465==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==1541465==    by 0x121F03: duplicate_string (openpgp.c:248)
==1541465==    by 0x121E20: create_error_result (openpgp.c:229)
==1541465==    by 0x122080: validate_size_strict (openpgp.c:282)
==1541465==    by 0x1243C1: openpgp_encrypt_symmetric (openpgp.c:950)
==1541465==    by 0x109BBD: test_flatbuffer_size_boundaries (test_memory_large_data.c:135)
==1541465==    by 0x10A435: run_isolated_test (test_isolation_manager.c:68)
==1541465==    by 0x10A2C6: main (test_memory_large_data.c:232)
==1541465== 
==1541465== 46 bytes in 1 blocks are definitely lost in loss record 2 of 5
==1541465==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==1541465==    by 0x121F03: duplicate_string (openpgp.c:248)
==1541465==    by 0x121E20: create_error_result (openpgp.c:229)
==1541465==    by 0x122080: validate_size_strict (openpgp.c:282)
==1541465==    by 0x127788: openpgp_sign (openpgp.c:2007)
==1541465==    by 0x109C65: test_flatbuffer_size_boundaries (test_memory_large_data.c:145)
==1541465==    by 0x10A435: run_isolated_test (test_isolation_manager.c:68)
==1541465==    by 0x10A2C6: main (test_memory_large_data.c:232)
==1541465== 
==1541465== 511 bytes in 1 blocks are definitely lost in loss record 3 of 5
==1541465==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==1541465==    by 0x109897: test_key_parameter_boundaries (test_memory_large_data.c:97)
==1541465==    by 0x10A435: run_isolated_test (test_isolation_manager.c:68)
==1541465==    by 0x10A2AA: main (test_memory_large_data.c:231)
==1541465== 
==1541465== 1,024 bytes in 1 blocks are definitely lost in loss record 4 of 5
==1541465==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==1541465==    by 0x109D41: test_memory_allocation_patterns (test_memory_large_data.c:159)
==1541465==    by 0x10A435: run_isolated_test (test_isolation_manager.c:68)
==1541465==    by 0x10A2E2: main (test_memory_large_data.c:233)
==1541465== 
==1541465== 3,071 bytes in 1 blocks are definitely lost in loss record 5 of 5
==1541465==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==1541465==    by 0x1095D4: test_signature_data_boundaries (test_memory_large_data.c:60)
==1541465==    by 0x10A435: run_isolated_test (test_isolation_manager.c:68)
==1541465==    by 0x10A28E: main (test_memory_large_data.c:230)
==1541465== 
==1541465== LEAK SUMMARY:
==1541465==    definitely lost: 4,698 bytes in 5 blocks
==1541465==    indirectly lost: 0 bytes in 0 blocks
==1541465==      possibly lost: 0 bytes in 0 blocks
==1541465==    still reachable: 0 bytes in 0 blocks
==1541465==         suppressed: 0 bytes in 0 blocks
==1541465== 
==1541465== For lists of detected and suppressed errors, rerun with: -s
==1541465== ERROR SUMMARY: 5 errors from 5 contexts (suppressed: 0 from 0)
